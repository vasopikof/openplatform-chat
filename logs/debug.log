--------> DEBUG PID: 21894 (v3.0.1)
====================================================
PID           : 21903
Node.js       : v8.11.3
Total.js      : v3.0.1
OS            : linux 4.4.0-92-generic
Memory        : 11.72 MB / 18.94 MB
====================================================
Name          : Chat
Version       : 1.0.0
Author        : Peter Å irka
Date          : 2018-08-27 21:27:37
Mode          : debug
====================================================
Directory     : /www/www/totaljs_com-opchat
node_modules  : /www/node_modules/total.js/
====================================================

http://0.0.0.0:8111/

--- UPD --- [ 2018-08-28 08:01:52 ] ----------------> /controllers/api.js
--- UPD --- [ 2018-08-28 08:28:27 ] ----------------> /definitions/auth.js
--- UPD --- [ 2018-08-28 11:49:05 ] ----------------> config
--- REM --- [ 2018-08-28 11:50:08 ] ----------------> /schemas/rooms.js
--- UPD --- [ 2018-08-28 11:50:25 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 11:51:38 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 11:55:42 ] ----------------> /controllers/api.js
--- UPD --- [ 2018-08-28 11:56:03 ] ----------------> /controllers/api.js
--- ADD --- [ 2018-08-28 11:56:17 ] ----------------> .eslintrc.js
--- UPD --- [ 2018-08-28 11:56:27 ] ----------------> .eslintrc.js
--- UPD --- [ 2018-08-28 11:56:29 ] ----------------> .eslintrc.js
--- UPD --- [ 2018-08-28 11:59:40 ] ----------------> /controllers/api.js
--- UPD --- [ 2018-08-28 11:59:49 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 11:59:59 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 12:02:28 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 12:04:27 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 12:43:39 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 12:49:07 ] ----------------> /controllers/api.js
======= 2018-08-28 12:50:17: api ---> TypeError: Cannot read property 'id' of undefined (https://opchat.totaljs.com/api/messages/?openplatform=https%3A%2F%2Fopenplatform.totaljs.com%2Fverify%2F%3Faccesstoken%3Dbrvcbvnu3ifxuh52c0phpzn3tmnk6n-18082113230001hld1-h4kp1xaccwtqgmpdtn99rik054hhvbg0p5qvdpal-17082512500002gkj0-dwgxpfh4ge81449-1967313357) TypeError: Cannot read property 'id' of undefined
    at MAIN.ws.send.client (/www/www/totaljs_com-opchat/schemas/messages.js:20:45)
    at websocket_valid_fn (/www/node_modules/total.js/index.js:13239:15)
    at WebSocket.send (/www/node_modules/total.js/index.js:13202:10)
    at SchemaBuilderEntity.onInsert (/www/www/totaljs_com-opchat/schemas/messages.js:20:11)
    at /www/node_modules/total.js/builders.js:1165:15
    at SchemaBuilderEntity.$prepare (/www/node_modules/total.js/builders.js:1502:3)
    at SchemaBuilderEntity.execute (/www/node_modules/total.js/builders.js:1145:7)
    at SchemaBuilderEntity.insert (/www/node_modules/total.js/builders.js:1091:14)
    at SchemaBuilderEntity.CurrentSchemaInstance.SchemaInstance.$insert (/www/node_modules/total.js/builders.js:2792:17)
    at Controller.$insert (/www/node_modules/total.js/index.js:9969:13)
--- UPD --- [ 2018-08-28 12:50:33 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 12:50:55 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 12:58:29 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 12:59:25 ] ----------------> config
--- UPD --- [ 2018-08-28 13:01:23 ] ----------------> /schemas/messages.js
======= 2018-08-28 13:01:23: F.install('schema') ---> SyntaxError: missing ) after argument list /www/www/totaljs_com-opchat/schemas/messages.js:27
		TABLE('messages').find2().where('roomid', joinid($.id, $.user.id).take(100).callback($.callback);
		                                                                                               ^

SyntaxError: missing ) after argument list
    at createScript (vm.js:80:10)
    at Object.runInThisContext (vm.js:139:10)
    at Module._compile (module.js:616:28)
    at Object.Module._extensions..js (module.js:663:10)
    at Module.load (module.js:565:32)
    at tryModuleLoad (module.js:505:12)
    at Function.Module._load (module.js:497:3)
    at Module.require (module.js:596:17)
    at require (internal/module.js:11:18)
    at Framework.F.install (/www/node_modules/total.js/index.js:4235:11)
======= 2018-08-28 13:01:26: api ---> Error: Schema "Message" not found. (https://opchat.totaljs.com/api/messages/17082822230002upl0/?openplatform=https%3A%2F%2Fopenplatform.totaljs.com%2Fverify%2F%3Faccesstoken%3Dbrvcbvnu3ifxuh52c0phpzn3tmnk6n-18082113230001hld1-h4kp1xaccwtqgmpdtn99rik054hhvbg0p5qvdpal-17082512500002gkj0-dwgxpfh4ge81449-1967313357) Error: Schema "Message" not found.
    at Controller.throw500.Controller.view500 (/www/node_modules/total.js/index.js:12287:43)
    at Controller.controller_json_workflow (/www/node_modules/total.js/index.js:16588:10)
    at IncomingMessage.PROTO.$total_execute2 (/www/node_modules/total.js/index.js:14539:32)
    at IncomingMessage.PROTO.$total_execute (/www/node_modules/total.js/index.js:14509:9)
    at IncomingMessage.PROTO.$total_authorize (/www/node_modules/total.js/index.js:14628:10)
    at /www/node_modules/total.js/index.js:14796:9
    at Framework.onAuthorize (/www/www/totaljs_com-opchat/definitions/auth.js:13:3)
    at IncomingMessage.PROTO.$total_prepare (/www/node_modules/total.js/index.js:14783:6)
    at IncomingMessage.PROTO.$total_end (/www/node_modules/total.js/index.js:14445:9)
    at Framework.F.$requestcontinue (/www/node_modules/total.js/index.js:7228:9)
--- UPD --- [ 2018-08-28 13:01:35 ] ----------------> /schemas/messages.js
======= 2018-08-28 13:01:36: api ---> TypeError: arr.apply is not a function (https://opchat.totaljs.com/api/messages/17082822230002upl0/?openplatform=https%3A%2F%2Fopenplatform.totaljs.com%2Fverify%2F%3Faccesstoken%3Dbrvcbvnu3ifxuh52c0phpzn3tmnk6n-18082113230001hld1-h4kp1xaccwtqgmpdtn99rik054hhvbg0p5qvdpal-17082512500002gkj0-dwgxpfh4ge81449-1967313357) TypeError: arr.apply is not a function
    at joinid (/www/www/totaljs_com-opchat/schemas/messages.js:34:6)
    at SchemaBuilderEntity.onQuery (/www/www/totaljs_com-opchat/schemas/messages.js:27:45)
    at SchemaBuilderEntity.query (/www/node_modules/total.js/builders.js:1390:9)
    at Controller.$query (/www/node_modules/total.js/index.js:9936:19)
    at Controller.controller_json_workflow (/www/node_modules/total.js/index.js:16612:17)
    at IncomingMessage.PROTO.$total_execute2 (/www/node_modules/total.js/index.js:14539:32)
    at IncomingMessage.PROTO.$total_execute (/www/node_modules/total.js/index.js:14509:9)
    at IncomingMessage.PROTO.$total_authorize (/www/node_modules/total.js/index.js:14628:10)
    at /www/node_modules/total.js/index.js:14796:9
    at Framework.onAuthorize (/www/www/totaljs_com-opchat/definitions/auth.js:13:3)
======= 2018-08-28 13:01:39: api ---> TypeError: arr.apply is not a function (https://opchat.totaljs.com/api/messages/17082822230002upl0/?openplatform=https%3A%2F%2Fopenplatform.totaljs.com%2Fverify%2F%3Faccesstoken%3Dbrvcbvnu3ifxuh52c0phpzn3tmnk6n-18082113230001hld1-h4kp1xaccwtqgmpdtn99rik054hhvbg0p5qvdpal-17082512500002gkj0-dwgxpfh4ge81449-1967313357) TypeError: arr.apply is not a function
    at joinid (/www/www/totaljs_com-opchat/schemas/messages.js:34:6)
    at SchemaBuilderEntity.onQuery (/www/www/totaljs_com-opchat/schemas/messages.js:27:45)
    at SchemaBuilderEntity.query (/www/node_modules/total.js/builders.js:1390:9)
    at Controller.$query (/www/node_modules/total.js/index.js:9936:19)
    at Controller.controller_json_workflow (/www/node_modules/total.js/index.js:16612:17)
    at IncomingMessage.PROTO.$total_execute2 (/www/node_modules/total.js/index.js:14539:32)
    at IncomingMessage.PROTO.$total_execute (/www/node_modules/total.js/index.js:14509:9)
    at IncomingMessage.PROTO.$total_authorize (/www/node_modules/total.js/index.js:14628:10)
    at /www/node_modules/total.js/index.js:14796:9
    at Framework.onAuthorize (/www/www/totaljs_com-opchat/definitions/auth.js:13:3)
--- UPD --- [ 2018-08-28 13:01:42 ] ----------------> /schemas/messages.js
======= 2018-08-28 13:01:54: api ---> TypeError: arr.apply is not a function (https://opchat.totaljs.com/api/messages/17082822230002upl0/?openplatform=https%3A%2F%2Fopenplatform.totaljs.com%2Fverify%2F%3Faccesstoken%3Dbrvcbvnu3ifxuh52c0phpzn3tmnk6n-18082113230001hld1-h4kp1xaccwtqgmpdtn99rik054hhvbg0p5qvdpal-17082512500002gkj0-dwgxpfh4ge81449-1967313357) TypeError: arr.apply is not a function
    at joinid (/www/www/totaljs_com-opchat/schemas/messages.js:34:6)
    at SchemaBuilderEntity.onQuery (/www/www/totaljs_com-opchat/schemas/messages.js:27:45)
    at SchemaBuilderEntity.query (/www/node_modules/total.js/builders.js:1390:9)
    at Controller.$query (/www/node_modules/total.js/index.js:9936:19)
    at Controller.controller_json_workflow (/www/node_modules/total.js/index.js:16612:17)
    at IncomingMessage.PROTO.$total_execute2 (/www/node_modules/total.js/index.js:14539:32)
    at IncomingMessage.PROTO.$total_execute (/www/node_modules/total.js/index.js:14509:9)
    at IncomingMessage.PROTO.$total_authorize (/www/node_modules/total.js/index.js:14628:10)
    at /www/node_modules/total.js/index.js:14796:9
    at Framework.onAuthorize (/www/www/totaljs_com-opchat/definitions/auth.js:13:3)
--- UPD --- [ 2018-08-28 13:02:08 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 13:03:11 ] ----------------> /schemas/messages.js
======= 2018-08-28 13:03:17: api ---> TypeError: console.lgo is not a function (https://opchat.totaljs.com/api/messages/17082822230002upl0/?openplatform=https%3A%2F%2Fopenplatform.totaljs.com%2Fverify%2F%3Faccesstoken%3Dbrvcbvnu3ifxuh52c0phpzn3tmnk6n-18082113230001hld1-h4kp1xaccwtqgmpdtn99rik054hhvbg0p5qvdpal-17082512500002gkj0-dwgxpfh4ge81449-1967313357) TypeError: console.lgo is not a function
    at joinid (/www/www/totaljs_com-opchat/schemas/messages.js:36:10)
    at SchemaBuilderEntity.onQuery (/www/www/totaljs_com-opchat/schemas/messages.js:27:45)
    at SchemaBuilderEntity.query (/www/node_modules/total.js/builders.js:1390:9)
    at Controller.$query (/www/node_modules/total.js/index.js:9936:19)
    at Controller.controller_json_workflow (/www/node_modules/total.js/index.js:16612:17)
    at IncomingMessage.PROTO.$total_execute2 (/www/node_modules/total.js/index.js:14539:32)
    at IncomingMessage.PROTO.$total_execute (/www/node_modules/total.js/index.js:14509:9)
    at IncomingMessage.PROTO.$total_authorize (/www/node_modules/total.js/index.js:14628:10)
    at /www/node_modules/total.js/index.js:14796:9
    at Framework.onAuthorize (/www/www/totaljs_com-opchat/definitions/auth.js:13:3)
--- UPD --- [ 2018-08-28 13:03:24 ] ----------------> /schemas/messages.js
[ '17082512500002gkj0', '17082822230002upl0' ]
--- UPD --- [ 2018-08-28 13:03:39 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 13:03:41 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 13:38:04 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 13:38:21 ] ----------------> config
--- UPD --- [ 2018-08-28 13:38:26 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 13:39:35 ] ----------------> /controllers/api.js
--- UPD --- [ 2018-08-28 13:56:27 ] ----------------> config
--- UPD --- [ 2018-08-28 14:01:19 ] ----------------> /controllers/api.js
--- UPD --- [ 2018-08-28 14:01:36 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 14:03:06 ] ----------------> config
--- UPD --- [ 2018-08-28 14:06:34 ] ----------------> config
--- UPD --- [ 2018-08-28 14:06:43 ] ----------------> config
--- UPD --- [ 2018-08-28 14:07:11 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 14:07:14 ] ----------------> /schemas/messages.js
Error: Table "unread" doesn't contain any schema
    at Table.TP.throwReadonly (/www/node_modules/total.js/nosql.js:5558:8)
    at ReadStream.<anonymous> (/www/node_modules/total.js/nosql.js:604:6)
    at emitOne (events.js:116:13)
    at ReadStream.emit (events.js:211:7)
    at fs.js:2001:12
    at FSReqWrap.oncomplete (fs.js:135:15)
======= 2018-08-28 14:07:24: Error: Table "unread" doesn't contain any schema Error: Table "unread" doesn't contain any schema
    at Table.TP.throwReadonly (/www/node_modules/total.js/nosql.js:5558:8)
    at ReadStream.<anonymous> (/www/node_modules/total.js/nosql.js:604:6)
    at emitOne (events.js:116:13)
    at ReadStream.emit (events.js:211:7)
    at fs.js:2001:12
    at FSReqWrap.oncomplete (fs.js:135:15)
--- UPD --- [ 2018-08-28 14:08:06 ] ----------------> config
--- UPD --- [ 2018-08-28 14:08:16 ] ----------------> config
--- UPD --- [ 2018-08-28 14:08:30 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 14:08:37 ] ----------------> config
--- UPD --- [ 2018-08-28 14:08:42 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 14:15:10 ] ----------------> /controllers/api.js
--- UPD --- [ 2018-08-28 14:17:49 ] ----------------> /controllers/api.js
--- UPD --- [ 2018-08-28 14:18:49 ] ----------------> /controllers/api.js
--- UPD --- [ 2018-08-28 14:20:20 ] ----------------> /controllers/api.js
--- UPD --- [ 2018-08-28 14:20:27 ] ----------------> config
--- UPD --- [ 2018-08-28 14:20:29 ] ----------------> config
--- UPD --- [ 2018-08-28 14:27:15 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 14:27:21 ] ----------------> /schemas/messages.js
======= 2018-08-28 14:27:43: api ---> TypeError: MAIN.users[$.user.openplatformid].findItem is not a function (https://opchat.totaljs.com/api/messages/?openplatform=https%3A%2F%2Fopenplatform.totaljs.com%2Fverify%2F%3Faccesstoken%3Dbrvcbvnu3ifxuh52c0phpzn3tmnk6n-18082113230001hld1-54tbsdf85n8ripfkoksl8li73ilg731s89dvk6b8-17082822230002upl0-b1i8n4w4mk-357599370) TypeError: MAIN.users[$.user.openplatformid].findItem is not a function
    at SchemaBuilderEntity.onInsert (/www/www/totaljs_com-opchat/schemas/messages.js:11:50)
    at /www/node_modules/total.js/builders.js:1165:15
    at SchemaBuilderEntity.$prepare (/www/node_modules/total.js/builders.js:1502:3)
    at SchemaBuilderEntity.execute (/www/node_modules/total.js/builders.js:1145:7)
    at SchemaBuilderEntity.insert (/www/node_modules/total.js/builders.js:1091:14)
    at SchemaBuilderEntity.CurrentSchemaInstance.SchemaInstance.$insert (/www/node_modules/total.js/builders.js:2792:17)
    at Controller.$insert (/www/node_modules/total.js/index.js:9969:13)
    at Controller.controller_json_workflow (/www/node_modules/total.js/index.js:16612:17)
    at IncomingMessage.PROTO.$total_execute2 (/www/node_modules/total.js/index.js:14541:32)
    at IncomingMessage.PROTO.$total_execute (/www/node_modules/total.js/index.js:14509:9)
--- UPD --- [ 2018-08-28 14:28:00 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 14:28:04 ] ----------------> /schemas/messages.js
======= 2018-08-28 14:28:24: api ---> TypeError: Cannot read property 'findItem' of undefined (https://opchat.totaljs.com/api/messages/?openplatform=https%3A%2F%2Fopenplatform.totaljs.com%2Fverify%2F%3Faccesstoken%3Dbrvcbvnu3ifxuh52c0phpzn3tmnk6n-18082113230001hld1-54tbsdf85n8ripfkoksl8li73ilg731s89dvk6b8-17082822230002upl0-b1i8n4w4mk-357599370) TypeError: Cannot read property 'findItem' of undefined
    at SchemaBuilderEntity.onInsert (/www/www/totaljs_com-opchat/schemas/messages.js:11:56)
    at /www/node_modules/total.js/builders.js:1165:15
    at SchemaBuilderEntity.$prepare (/www/node_modules/total.js/builders.js:1502:3)
    at SchemaBuilderEntity.execute (/www/node_modules/total.js/builders.js:1145:7)
    at SchemaBuilderEntity.insert (/www/node_modules/total.js/builders.js:1091:14)
    at SchemaBuilderEntity.CurrentSchemaInstance.SchemaInstance.$insert (/www/node_modules/total.js/builders.js:2792:17)
    at Controller.$insert (/www/node_modules/total.js/index.js:9969:13)
    at Controller.controller_json_workflow (/www/node_modules/total.js/index.js:16612:17)
    at IncomingMessage.PROTO.$total_execute2 (/www/node_modules/total.js/index.js:14541:32)
    at IncomingMessage.PROTO.$total_execute (/www/node_modules/total.js/index.js:14509:9)
--- UPD --- [ 2018-08-28 14:28:42 ] ----------------> /schemas/messages.js
--- UPD --- [ 2018-08-28 14:30:03 ] ----------------> /schemas/messages.js
